## @file
# Azure Pipelines step to setup Python pre-requisites.
#
# Copyright (c) Microsoft Corporation. All rights reserved.
# SPDX-License-Identifier: BSD-2-Clause-Patent
##

parameters:
- name: install_python
  displayName: Install Python
  type: boolean
  default: true
- name: tool_chain_tag
  displayName: Tool Chain Tag
  type: string
  default: ''

steps:

- ${{ if and(eq(parameters.install_python, true), contains(parameters.tool_chain_tag, 'CLANGPDB')) }}:
  - powershell:
    wget https://apt.llvm.org/llvm.sh
    chmod +x llvm.sh
    sudo ./llvm.sh 18
    displayName: Install LLVM 18 on Linux
    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))

  - powershell:
    choco install llvm --version=18.1.5"
    choco install make"
    displayName: Install LLVM 18 on Windows
    condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'))
